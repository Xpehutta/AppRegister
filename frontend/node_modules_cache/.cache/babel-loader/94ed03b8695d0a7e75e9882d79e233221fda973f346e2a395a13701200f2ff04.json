{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getAllApplications,updateApplicationStatus}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminApplicationsList=()=>{const[applications,setApplications]=useState([]);const[loading,setLoading]=useState(true);const[selectedApp,setSelectedApp]=useState(null);const[newStatus,setNewStatus]=useState('');const[comment,setComment]=useState('');useEffect(()=>{fetchApplications();},[]);const fetchApplications=async()=>{try{const res=await getAllApplications();setApplications(res.data);}catch(err){console.error(err);}finally{setLoading(false);}};const handleUpdate=async id=>{try{await updateApplicationStatus(id,newStatus,comment);setSelectedApp(null);setNewStatus('');setComment('');fetchApplications();}catch(err){alert('Update failed');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Applications (Admin)\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Submitted\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:applications.map(app=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:app.id}),/*#__PURE__*/_jsx(\"td\",{children:app.email}),/*#__PURE__*/_jsx(\"td\",{children:app.status}),/*#__PURE__*/_jsx(\"td\",{children:app.submitted_at?new Date(app.submitted_at).toLocaleString():'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedApp(app),className:\"btn\",children:\"Update Status\"})})]},app.id))})]}),selectedApp&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Update Status for Application \",selectedApp.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:newStatus,onChange:e=>setNewStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"submitted\",children:\"Submitted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"under_review\",children:\"Under Review\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accepted\",children:\"Accepted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rejected\",children:\"Rejected\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Comment (optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:comment,onChange:e=>setComment(e.target.value),rows:\"3\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdate(selectedApp.id),className:\"btn\",disabled:!newStatus,children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedApp(null),className:\"btn btn-danger\",children:\"Cancel\"})]})]});};export default AdminApplicationsList;","map":{"version":3,"names":["React","useEffect","useState","getAllApplications","updateApplicationStatus","jsx","_jsx","jsxs","_jsxs","AdminApplicationsList","applications","setApplications","loading","setLoading","selectedApp","setSelectedApp","newStatus","setNewStatus","comment","setComment","fetchApplications","res","data","err","console","error","handleUpdate","id","alert","children","map","app","email","status","submitted_at","Date","toLocaleString","onClick","className","value","onChange","e","target","rows","disabled"],"sources":["/app/src/components/AdminApplicationsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getAllApplications, updateApplicationStatus } from '../api';\n\nconst AdminApplicationsList = () => {\n  const [applications, setApplications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedApp, setSelectedApp] = useState(null);\n  const [newStatus, setNewStatus] = useState('');\n  const [comment, setComment] = useState('');\n\n  useEffect(() => {\n    fetchApplications();\n  }, []);\n\n  const fetchApplications = async () => {\n    try {\n      const res = await getAllApplications();\n      setApplications(res.data);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdate = async (id) => {\n    try {\n      await updateApplicationStatus(id, newStatus, comment);\n      setSelectedApp(null);\n      setNewStatus('');\n      setComment('');\n      fetchApplications();\n    } catch (err) {\n      alert('Update failed');\n    }\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h2>All Applications (Admin)</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>User</th>\n            <th>Status</th>\n            <th>Submitted</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {applications.map(app => (\n            <tr key={app.id}>\n              <td>{app.id}</td>\n              <td>{app.email}</td>\n              <td>{app.status}</td>\n              <td>{app.submitted_at ? new Date(app.submitted_at).toLocaleString() : '-'}</td>\n              <td>\n                <button onClick={() => setSelectedApp(app)} className=\"btn\">Update Status</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {selectedApp && (\n        <div className=\"modal\">\n          <h3>Update Status for Application {selectedApp.id}</h3>\n          <div className=\"form-group\">\n            <label>New Status</label>\n            <select value={newStatus} onChange={(e) => setNewStatus(e.target.value)}>\n              <option value=\"\">Select...</option>\n              <option value=\"submitted\">Submitted</option>\n              <option value=\"under_review\">Under Review</option>\n              <option value=\"accepted\">Accepted</option>\n              <option value=\"rejected\">Rejected</option>\n            </select>\n          </div>\n          <div className=\"form-group\">\n            <label>Comment (optional)</label>\n            <textarea value={comment} onChange={(e) => setComment(e.target.value)} rows=\"3\"></textarea>\n          </div>\n          <button onClick={() => handleUpdate(selectedApp.id)} className=\"btn\" disabled={!newStatus}>Update</button>\n          <button onClick={() => setSelectedApp(null)} className=\"btn btn-danger\">Cancel</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminApplicationsList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}